<!DOCTYPE html>
<html lang="en">
  <head>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css"
  integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
  crossorigin=""/>
  <script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js"
   integrity="sha512-nMMmRyTVoLYqjP9hrbed9S+FzjZHW5gY1TWCHA5ckwXZBadntCNs8kEqAWdrb9O7rxbCaA4lKTIWjDXZxflOcA=="
   crossorigin=""></script>
   <!-- <script src="http://maps.google.com/maps/api/js?v=3&sensor=false"></script>
   <script src="lib/leaflet/Google.js"></script> -->

   <script src="us_states.geojson" type="text/javascript"></script>
    </head>
    <body>
    <div id="map"></div>
    <div id="sideInfoPopUp"></div>
    <style> #map { height: 800px; width: auto} </style>
<script>

var mymap = L.map('map').setView([46.8797, -110.3626], 7);

var topo = L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
  attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
  maxZoom: 18,
  id: 'mapbox.streets',
  accessToken: 'pk.eyJ1Ijoic2hhcm9uZnVsbGVyIiwiYSI6ImNqb2dwNWZiZjBoanAzdm1uMGl4aHV3MnEifQ.Xiw-4Exg4p6kiqkJXow27g'
}).addTo(mymap);

var GeoportailFrance_ignMaps = L.tileLayer('https://wxs.ign.fr/{apikey}/geoportail/wmts?REQUEST=GetTile&SERVICE=WMTS&VERSION=1.0.0&STYLE={style}&TILEMATRIXSET=PM&FORMAT={format}&LAYER=GEOGRAPHICALGRIDSYSTEMS.MAPS&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}', {
	attribution: '<a target="_blank" href="https://www.geoportail.gouv.fr/">Geoportail France</a>',
	bounds: [[-75, -180], [81, 180]],
	minZoom: 2,
	maxZoom: 18,
	apikey: 'choisirgeoportail',
	format: 'image/jpeg',
	style: 'normal'
});

//tried to add roadmap layer from google

// var googleRoadmapLayer = new L.Google('ROADMAP');
// map.addLayer(googleRoadmapLayer);


// map.fitBounds(polyline.getBounds());
//

//adding markers to the maps

var marker = L.marker([46.8797, -110.3626]).addTo(mymap);


//adding info to the popUp side bar

// function onEachFeature(feature, layer) {
//     layer.on({
//         click: function populate() {
//           document.getElementById("sideInfoPopUp"),
//           innerHTML = <h4>feature.properties.place_name</h4> + "<br>" + feature.properties.loc_img_link + "<br>" + feature.properties.loc_desc + "<br>" + feature.properties.info_link + <button id="addStories" placeholder="Add my Story"></button>
//         }
//     });
// }

//Local geoJson file loaded in--This code reads in the data and I get borders
// geojson = L.geoJson(states, {
//   style: style,
// }).addTo(mymap);

geojson = L.geoJSON(states, {
  style: function(feature) {
    switch (feature.properties.STATE_NAME) {
      case 'Montana' : return {fillOpacity: 0, color: 'black'};
      // case !'Montana': return {fillOpacity: 30, color: 'black'};
    }
  }
}).addTo(mymap);
 //map.fitBounds(polygon.getBounds());

//L.geoJSON(states.responseJSON);

// function style(features) {
//   return {
//     weight: 3.5,
//     opacity: 100,
//     color: 'black',
//     fillOpacity: getColor(states.Feature.Polygon.properties.STATE_NAME)
//      };
  // } else {
  //     return {
  //   weight: 2,
  //   color: 'red',
  //   colorFill: 'red'}
  // };
//};

// function getColor(d) {
//     return d === 'Montana' ? 1 :
//            d != 'Montana'  ? 30 :
//                              50;
//          }
         // if (states.feature.properties.STATE_NAME == 'Montana') {
// map.eachLayer(function (layer) {
//      var n = '';
//      if (typeof layer.feature !== 'undefined') {
//          var n = layer.feature.properties.STATE_NAME;
//      }
//      if (n.replace(/\s+/g, '-').toLowerCase() == 'montana') {
//          // found the state-- go ahead and highlight it
//          layer.setStyle({
//              weight: 3,
//              color: '#666',
//              dashArray: '',
//              fillOpacity: 0.7,
//              fillColor:'#499bc4'
//          });
//
//          if (!L.Browser.ie && !L.Browser.opera) {
//              layer.bringToFront();
//          }
//      }
//  });



//
// var us = 'https://leafletjs.com/examples/choropleth/us-states.js'
//  L.geoJson(statesData, us).addTo(mymap);
// function usState(d) {
//   return d = 'Montana' ? true :
//   d != 'Montana' ? false
// };


//trying to incorporate streetview after certain zoom level

// var mapGoogleStreet = new google.maps.LatLng(latitude,longitude); //fenway = wf {G: 40.989025, K: 29.096618000000035}
// Insurance.Map.StreetView(fenway);
//
// StreetView: function (coor) {
//             var options = {
//                 position: coor,
//                 pov: {
//                     heading: 34,
//                     pitch:10
//                 }
//             };
//             var panorama = new google.maps.StreetViewPanorama(document.getElementById('map'), options);
//             map.setStreetView(panorama);
//
//

//Trying to clip just montana
//        }


// map.on('load', function () {
//   map.addSource("statesData", {
//     "type": "geojson",
//     // "data":"../us_states.geojson"
//     "data":"https://leafletjs.com/examples/choropleth/us-states.js" //"https://www.mapbox.com/mapbox-gl-js/assets/us_states.geojson"
//   });
// });

//Trying to clip just Montana

//var montana = state.feature.properties.NAME ==='Montana';
//map.setFeatureState({source: 'states', id: 30});
var clippedMontana = function clip(states) {
  console.log("montana")
   for (var i = 0; i < states.length; i++) {
      if (states.feature.properties.STATE_NAME[i] === "Montana") {
      return this.states.feature.properties({setView: true});
  }   else {
    return {setView: false};
  }}
 };

//Add borders around each state


// map.addLayer({
//         "id": "state-borders",
//         "type": "line",
//         "source": "stateData",
//         "layout": {},
//         "paint": {
//             "line-color": "#627BC1",
//             "line-width": 2
//         }
//     });
  // }
 // var baseMaps = {
 //    "Topo": topo,
 //    "Streets": streets
 //  };
  //   'Google Roadmap': googleRoadmapLayer, 'Google': googleLayer};
  // var overlayMaps = {geojson }
  // L.control.layers(baseMaps, overlayMaps).addTo(mymap);
</script>
</body>
</html>
